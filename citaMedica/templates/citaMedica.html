<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Cita Médica</title>
    <!-- Estilos de Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9; /* Gris claro */
            color: #333; /* Gris oscuro */
            margin: 0;
            padding: 20px;
        }

        h1, h2 {
            color: #007BFF; /* Celeste */
            margin-bottom: 20px;
            text-align: center;
        }

        form {
            background-color: #fff; /* Blanco */
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        table {
            background-color: #fff; /* Blanco */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            overflow: hidden;
        }
        .table-header-blue {
            background-color: #007BFF; /* Azul */
            color: white;
        }
        th {
            background-color: #007BFF; /* Celeste */
            color: white;
            font-weight: 600;
            text-align: center;
        }

        tbody tr:nth-child(even) {
            background-color: #f2f2f2; /* Gris hueso */
        }

        tbody tr:hover {
            background-color: #e6e6e6; /* Gris más claro */
        }

        th, td {
            text-align: center;
            padding: 8px 10px;
            font-size: 0.9em;
        }
             /* Estilos para el footer */
             footer {
            background-color: #007bff;
            color: #f2f2f2;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            left: 0; /* Ajuste para eliminar el margen izquierdo */
            width: 100%;
            z-index: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Buscar Paciente por Cédula</h1>
        
        <form method="get" action="" class="mb-4">
            {{ search_form.as_p }}
            <button type="submit" class="btn btn-primary me-2">Buscar</button>
            <button type="button" class="btn btn-secondary" onclick="location.href='/cita/'">Limpiar</button>
        </form>
        
        {% if error_message %}
            <p>{{ error_message }}</p>
        {% elif paciente %}
            <h2 class="mb-3">Información del Paciente</h2>
            <div class="row mb-3">
                <div class="col">
                    <p><strong>Nombre:</strong> {{ paciente.nombre }} {{ paciente.apellido }}</p>
                </div>
                <div class="col">
                    <p><strong>Cédula:</strong> {{ paciente.cedula }}</p>
                </div>
                <div class="col">
                    <p><strong>Celular:</strong> {{ paciente.celular }}</p>
                </div>
            </div>

            <form id="cita-form" method="post" class="mb-4">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary">Agregar Cita Médica</button>
            </form>

            <h2 class="mb-3">Citas Médicas</h2>
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead class="table-header-blue">
                        <tr>
                            <th scope="col">Nº</th>
                            <th scope="col">Fecha</th>
                            <th scope="col">Fisioterapeuta</th>
                            <th scope="col">Paciente</th>
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for cita in citas_medicas %}
                        <tr>
                            <td>{{ forloop.counter }}</td> <!-- Muestra el índice, empezando por 1 -->
                            <td>{{ cita.fecha }}</td>
                            <td>{{ cita.cedulaFisioterapeuta }}</td>
                            <td>{{ cita.cedulaPaciente }}</td>
                            <td>
                                <!-- Botón para agregar terapia -->
                                <form method="post" class="d-inline">  <!-- Agregar terapia -->
                                    {% csrf_token %}
                                    <input type="hidden" name="cita_id" value="{{ cita.citaID }}">
                                    <button type="submit" name="agregar_terapia" class="btn btn-primary me-2">Agregar</button>
                                </form>
            
                                <!-- Botón para eliminar cita -->
                                <form method="post" class="d-inline">  <!-- Eliminar cita -->
                                    {% csrf_token %}
                                    <input type="hidden" name="cita_id" value="{{ cita.citaID }}">
                                    <button type="submit" name="eliminar_cita" class="btn btn-danger">Eliminar</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}
    </div>
    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Clínica de Fisioterapia. Todos los derechos reservados.</p>
        <p>Ubicación: Universidad Técnica de Ambato</p>
    </footer>
</body>
</html>
